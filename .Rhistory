# Chunk 1
# clear environment
rm(list = ls())
# install (if necessary) and load packages
# function written by stevenworthington
Ipak <- function(pkg){
new.pkg <- pkg[!(pkg %in% installed.packages()[, 'Package'])]
if (length(new.pkg))
install.packages(new.pkg, dependencies = TRUE)
sapply(pkg, require, character.only = TRUE)
}
# vector of necessary packages
packages <- c('tidyverse', 'ggplot2', 'lme4',
'lmerTest', 'emmeans')
# using vector of packages, call ipak function
Ipak(packages)
# delete vestigial
rm(packages, Ipak)
# turn scientific notation off
options(scipen = 999)
# allow for Type III Sums of Square
options(contrasts = c('contr.sum', 'contr.poly'))
# set plotting options
theme_set(theme_classic() +
theme(strip.background =
element_rect(fill = "gray35"),
strip.text =
element_text(colour = "white"),
panel.border = element_blank()
)
)
# Chunk 2
DF.w <- readRDS("data/DF.w.rds")
DF.l.full <- readRDS("data/DF.l.full.rds")
DF.l <- readRDS("data/DF.l.rds")
DF.l.inc <- readRDS("data/DF.l.inc.rds")
# Chunk 3
# n participants
DF.w %>% nrow()
# n labs
DF.l$lab %>% unique() %>% length()
# n countries
DF.l$lab %>%
substr(start = 1,
stop = 3) %>%
unique() %>%
length()
# condition n
table(DF.l$condition) %>% prop.table()
table(DF.l$condition, DF.l$image) %>% prop.table()
# gender
table(DF.l$indiv_gend_var) %>% prop.table()
# age
DF.w %>%
summarise(m = mean(indiv_agee_var,
na.rm = T),
sd = sd(indiv_agee_var,
na.rm = T))
models[["secondary"]][["anxiety"]] <-
lmer(anxiety ~ trial * image * condition +
(1 | lab) +
(1 | ResponseId),
data = DF.l)
models <- list()
models[["secondary"]][["anxiety"]] <-
lmer(anxiety ~ trial * image * condition +
(1 | lab) +
(1 | ResponseId),
data = DF.l)
anova(models[["secondary"]][["anxiety"]])
emmeans(models[["secondary"]][["anxiety"]],
pairwise ~ trial ,
adjust = "none")
models[["secondary"]][["anxiety"]] <-
lmer(anxiety ~ trial * image * condition +
(1 + trial | lab) +
(1 + trial | ResponseId),
data = DF.l)
models[["secondary"]][["anxiety"]] <-
lmer(anxiety ~ trial * image * condition +
(1 + trial | lab) +
(1 | ResponseId),
data = DF.l)
models[["secondary"]][["anxiety"]] %>% summary()
