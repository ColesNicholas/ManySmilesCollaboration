# n labs
DF.l$lab %>% unique() %>% length()
# n countries
DF.l$lab %>%
substr(start = 1,
stop = 3) %>%
unique() %>%
length()
# condition n
table(DF.l$condition) %>% prop.table()
table(DF.l$condition, DF.l$image) %>% prop.table()
# inclusion criteria
DF.w %>%
summarise(n = n(),
m.age = mean(indiv_agee_var,
na.rm = T),
sd.age = sd(indiv_agee_var,
na.rm = T),
g.women = sum(indiv_gend_var == 1, na.rm = T) / n(),
g.men = sum(indiv_gend_var == 2, na.rm = T) / n(),
g.other = sum(indiv_gend_var == 3, na.rm = T) / n(),
# inclusion criteria pass rate
inc.dev = mean(inc.dev),
inc.att = mean(inc.att),
inc.fol = mean(inc.fol),
inc.mat = mean(inc.mat),
inc.dis = sum(inc.dis, na.rm = T) / n(),
inc.awa = sum(inc.awa, na.rm = T) / n()
)
DF.l.inc %>%
group_by(condition) %>%
summarise(m = mean(dq1),
sd = sd(dq1))
DF.l.inc %>%
group_by(condition, trial) %>%
summarise(m = mean(dq1),
sd = sd(dq1))
lmer(happy ~ trial * dq1 + (1 | ResponseId),
data = DF.l.inc)
DF.l.inc %>% names()
lmer(happiness ~ trial * dq1 +
(1 | ResponseId) +
(1 | lab),
data = DF.l.inc)
lmer(happiness ~ trial * dq1 +
(1 | ResponseId) +
(1 | lab),
data = DF.l.inc) %>% summary()
lmer(happiness ~ trial * condition * dq1 +
(1 | ResponseId) +
(1 | lab),
data = DF.l.inc) %>% summary()
lmer(happiness ~ trial * condition * dq1 +
(1 | ResponseId) +
(1 | lab),
data = DF.l.inc) %>% anova()
lmer(dq1 ~ trial * condition * image +
(1 | ResponseId) +
(1 | lab),
data = DF.l.inc) %>% anova()
tmp <- lmer(dq1 ~ trial * condition * image +
(1 | ResponseId) +
(1 | lab),
data = DF.l.inc) %>% anova()
tmp <- lmer(dq1 ~ trial * condition * image +
(1 | ResponseId) +
(1 | lab),
data = DF.l.inc)
anova(tmp)
joint_tests(tmp,
by = "condition",
lmerTest.limit = 9999)
tmp <- lmer(dq1 ~ trial * condition * image +
(1 | ResponseId) +
(1 | lab),
data = DF.l.full.inc)
anova(tmp)
joint_tests(tmp,
by = "condition",
lmerTest.limit = 9999)
emmeans(tmp,
pairwise ~ trial | image |condition,
adjust = "none")
emmeans(tmp,
pairwise ~ condition,
adjust = "none")
tmp <- lmer(dq1 ~ trial * condition * image +
(1 | ResponseId) +
(1 | lab),
data = DF.l.inc)
emmeans(tmp,
pairwise ~ condition,
adjust = "none")
anova(tmp)
joint_tests(tmp,
by = "condition",
lmerTest.limit = 9999)
lmer(happiness ~ trial * image * condition * dq1 +
(1 | ResponseId) +
(1 | lab),
data = DF.l.inc) %>% anova()
tmp2 <- lmer(happiness ~ trial * image * condition * dq1 +
(1 | ResponseId) +
(1 | lab),
data = DF.l.inc) %>% anova()
joint_tests(tmp2,
by = "condition",
lmerTest.limit = 9999)
tmp2 <- lmer(happiness ~ trial * image * condition * dq1 +
(1 | ResponseId) +
(1 | lab),
data = DF.l.inc)
joint_tests(tmp2,
by = "condition",
lmerTest.limit = 9999)
# Chunk 1
# clear environment
rm(list = ls())
# install (if necessary) and load packages
# function written by stevenworthington
Ipak <- function(pkg){
new.pkg <- pkg[!(pkg %in% installed.packages()[, 'Package'])]
if (length(new.pkg))
install.packages(new.pkg, dependencies = TRUE)
sapply(pkg, require, character.only = TRUE)
}
# vector of necessary packages
packages <- c('tidyverse', 'ggplot2', 'lme4',
'lmerTest', 'emmeans', 'metafor',
'ggtext')
# using vector of packages, call ipak function
Ipak(packages)
# delete vestigial
rm(packages, Ipak)
# turn scientific notation off
options(scipen = 999)
# allow for Type III Sums of Square
options(contrasts = c('contr.sum', 'contr.poly'))
# set plotting options
theme_set(theme_classic() +
theme(strip.background = element_rect(fill = "gray35"),
strip.text =element_text(colour = "white"),
panel.border = element_blank(),
legend.position = "none"
)
)
# Chunk 2
DF.w <- readRDS("data/processed/DF.w.rds")
DF.l.full <- readRDS("data/processed/DF.l.full.rds")
DF.l.full.inc <- readRDS("data/processed/DF.l.full.inc.rds")
DF.l <- readRDS("data/processed/DF.l.rds")
DF.l.inc <- readRDS("data/processed/DF.l.inc.rds")
# Chunk 3
# descriptives for full sample
desc.1 <- DF.w %>%
group_by(country) %>%
summarise(t.n = n(),
t.m.age = mean(indiv_agee_var,
na.rm = T),
t.sd.age = sd(indiv_agee_var,
na.rm = T),
t.women = sum(indiv_gend_var == 1, na.rm = T) / n(),
t.men = sum(indiv_gend_var == 2, na.rm = T) / n(),
t.other = sum(indiv_gend_var == 3, na.rm = T) / n(),
# inclusion criteria pass rate
inc.att = mean(inc.att),
inc.fol = mean(inc.fol),
inc.mat = mean(inc.mat),
inc.dev = mean(inc.dev),
inc.awa = sum(inc.awa, na.rm = T) / n(),
inc.dis = sum(inc.dis, na.rm = T) / n()
)
# descriptives for subset that met inclusion criteria
desc.2 <- DF.w %>%
filter(inc == 1,
inc.awa == 1) %>%
group_by(country) %>%
summarise(i.n = n(),
i.m.age = mean(indiv_agee_var,
na.rm = T),
i.sd.age = sd(indiv_agee_var,
na.rm = T),
i.women = sum(indiv_gend_var == 1, na.rm = T) / n(),
i.men = sum(indiv_gend_var == 2, na.rm = T) / n(),
i.other = sum(indiv_gend_var == 3, na.rm = T) / n()
)
# merge descriptives
desc = full_join(desc.1, desc.2, by = 'country')
rm(desc.1, desc.2)
# clean table
desc <- desc %>%
# round values
mutate_if(is.numeric,
funs(round(x = .,
digits = 2)
)
) %>%
# create age text
mutate(t.m.age = paste0(t.m.age,
" (", t.sd.age, ")"),
i.m.age = paste0(i.m.age,
" (", i.m.age, ")")
) %>%
# create gender text
mutate(t.women = paste0(t.women, "; ",
t.men, "; ",
t.other),
i.women = paste0(i.women, "; ",
i.men, "; ",
i.other)) %>%
# delete vestigial
select(-c(t.sd.age, t.men, t.other,
i.sd.age, i.men, i.other))
# export table
write.csv(desc, "desc.csv")
# Chunk 4
# n participants
DF.w %>% nrow()
# n labs
DF.l$lab %>% unique() %>% length()
# n countries
DF.l$lab %>%
substr(start = 1,
stop = 3) %>%
unique() %>%
length()
# condition n
table(DF.l$condition) %>% prop.table()
table(DF.l$condition, DF.l$image) %>% prop.table()
# inclusion criteria
DF.w %>%
summarise(n = n(),
m.age = mean(indiv_agee_var,
na.rm = T),
sd.age = sd(indiv_agee_var,
na.rm = T),
g.women = sum(indiv_gend_var == 1, na.rm = T) / n(),
g.men = sum(indiv_gend_var == 2, na.rm = T) / n(),
g.other = sum(indiv_gend_var == 3, na.rm = T) / n(),
# inclusion criteria pass rate
inc.dev = mean(inc.dev),
inc.att = mean(inc.att),
inc.fol = mean(inc.fol),
inc.mat = mean(inc.mat),
inc.dis = sum(inc.dis, na.rm = T) / n(),
inc.awa = sum(inc.awa, na.rm = T) / n()
)
# Chunk 5
models <- list()
DF.l.inc %>%
group_by(condition) %>%
summarise(m = mean(dq1),
sd = sd(dq1))
DF.l.inc %>%
group_by(condition, trial) %>%
summarise(m = mean(dq1),
sd = sd(dq1))
DF.l.full.inc %>%
group_by(condition, trial) %>%
summarise(m = mean(dq1),
sd = sd(dq1))
tmp <- lmer(dq1 ~ trial * condition * image +
(1 | ResponseId) +
(1 | lab),
data = DF.l.inc)
anova(tmp)
emmeans(tmp,
pairwise ~ trial | image |condition,
adjust = "none")
anova(tmp)
joint_tests(tmp,
by = "condition",
lmerTest.limit = 9999)
emmeans(tmp,
pairwise ~ trial  |condition,
adjust = "none")
emmeans(tmp,
pairwise ~ trial | image |condition,
adjust = "none")
anova(tmp)
tmp <- lmer(dq1 ~ trial * condition +
(1 | ResponseId) +
(1 | lab),
data = DF.l.inc)
anova(tmp)
joint_tests(tmp,
by = "condition",
lmerTest.limit = 9999)
emmeans(tmp,
pairwise ~ condition,
adjust = "none")
emmeans(tmp,
pairwise ~ trial | condition,
adjust = "none")
tmp2 <- lmer(happiness ~ trial * image * condition * dq1 +
(1 | ResponseId) +
(1 | lab),
data = DF.l.inc)
summary(tmp2)
joint_tests(tmp2,
by = "condition",
lmerTest.limit = 9999)
# Chunk 1
# clear environment
rm(list = ls())
# install (if necessary) and load packages
# function written by stevenworthington
Ipak <- function(pkg){
new.pkg <- pkg[!(pkg %in% installed.packages()[, 'Package'])]
if (length(new.pkg))
install.packages(new.pkg, dependencies = TRUE)
sapply(pkg, require, character.only = TRUE)
}
# vector of necessary packages
packages <- c('tidyverse', 'ggplot2', 'lme4',
'lmerTest', 'emmeans', 'metafor',
'ggtext')
# using vector of packages, call ipak function
Ipak(packages)
# delete vestigial
rm(packages, Ipak)
# turn scientific notation off
options(scipen = 999)
# allow for Type III Sums of Square
options(contrasts = c('contr.sum', 'contr.poly'))
# set plotting options
theme_set(theme_classic() +
theme(strip.background = element_rect(fill = "gray35"),
strip.text =element_text(colour = "white"),
panel.border = element_blank(),
legend.position = "none"
)
)
# Chunk 2
DF.w <- readRDS("data/processed/DF.w.rds")
DF.l.full <- readRDS("data/processed/DF.l.full.rds")
DF.l.full.inc <- readRDS("data/processed/DF.l.full.inc.rds")
DF.l <- readRDS("data/processed/DF.l.rds")
DF.l.inc <- readRDS("data/processed/DF.l.inc.rds")
# Chunk 3
# descriptives for full sample
desc.1 <- DF.w %>%
group_by(country) %>%
summarise(t.n = n(),
t.m.age = mean(indiv_agee_var,
na.rm = T),
t.sd.age = sd(indiv_agee_var,
na.rm = T),
t.women = sum(indiv_gend_var == 1, na.rm = T) / n(),
t.men = sum(indiv_gend_var == 2, na.rm = T) / n(),
t.other = sum(indiv_gend_var == 3, na.rm = T) / n(),
# inclusion criteria pass rate
inc.att = mean(inc.att),
inc.fol = mean(inc.fol),
inc.mat = mean(inc.mat),
inc.dev = mean(inc.dev),
inc.awa = sum(inc.awa, na.rm = T) / n(),
inc.dis = sum(inc.dis, na.rm = T) / n()
)
# descriptives for subset that met inclusion criteria
desc.2 <- DF.w %>%
filter(inc == 1,
inc.awa == 1) %>%
group_by(country) %>%
summarise(i.n = n(),
i.m.age = mean(indiv_agee_var,
na.rm = T),
i.sd.age = sd(indiv_agee_var,
na.rm = T),
i.women = sum(indiv_gend_var == 1, na.rm = T) / n(),
i.men = sum(indiv_gend_var == 2, na.rm = T) / n(),
i.other = sum(indiv_gend_var == 3, na.rm = T) / n()
)
# merge descriptives
desc = full_join(desc.1, desc.2, by = 'country')
rm(desc.1, desc.2)
# clean table
desc <- desc %>%
# round values
mutate_if(is.numeric,
funs(round(x = .,
digits = 2)
)
) %>%
# create age text
mutate(t.m.age = paste0(t.m.age,
" (", t.sd.age, ")"),
i.m.age = paste0(i.m.age,
" (", i.m.age, ")")
) %>%
# create gender text
mutate(t.women = paste0(t.women, "; ",
t.men, "; ",
t.other),
i.women = paste0(i.women, "; ",
i.men, "; ",
i.other)) %>%
# delete vestigial
select(-c(t.sd.age, t.men, t.other,
i.sd.age, i.men, i.other))
# export table
write.csv(desc, "desc.csv")
# Chunk 4
# n participants
DF.w %>% nrow()
# n labs
DF.l$lab %>% unique() %>% length()
# n countries
DF.l$lab %>%
substr(start = 1,
stop = 3) %>%
unique() %>%
length()
# condition n
table(DF.l$condition) %>% prop.table()
table(DF.l$condition, DF.l$image) %>% prop.table()
# inclusion criteria
DF.w %>%
summarise(n = n(),
m.age = mean(indiv_agee_var,
na.rm = T),
sd.age = sd(indiv_agee_var,
na.rm = T),
g.women = sum(indiv_gend_var == 1, na.rm = T) / n(),
g.men = sum(indiv_gend_var == 2, na.rm = T) / n(),
g.other = sum(indiv_gend_var == 3, na.rm = T) / n(),
# inclusion criteria pass rate
inc.dev = mean(inc.dev),
inc.att = mean(inc.att),
inc.fol = mean(inc.fol),
inc.mat = mean(inc.mat),
inc.dis = sum(inc.dis, na.rm = T) / n(),
inc.awa = sum(inc.awa, na.rm = T) / n()
)
# Chunk 5
models <- list()
# Chunk 6
# fit model
models[["primary"]][["prereg.min"]] <-
lmer(happiness ~ trial * condition * image +
(1 | ResponseId) +
(1 | lab),
data = DF.l.inc)
# inspect results
summary(models[["primary"]][["prereg.min"]])
anova(models[["primary"]][["prereg.min"]])
joint_tests(models[["primary"]][["prereg.min"]],
by = "condition",
lmerTest.limit = 9999)
joint_tests(models[["primary"]][["prereg.min"]],
by = c("image", "condition"),
lmerTest.limit = 9999)
# descriptives
emmeans(models[["primary"]][["prereg.min"]],
pairwise ~ image | condition,
adjust = "none")
emmeans(models[["primary"]][["prereg.min"]],
pairwise ~ trial | condition,
adjust = "none")
emmeans(models[["primary"]][["prereg.min"]],
pairwise ~ trial | image |condition,
adjust = "none")
# Chunk 7
lmer(happiness ~ trial * condition * image +
(1 | ResponseId) +
(1 | lab),
data = DF.l.inc,
subset = condition != "pentask") %>%
anova()
models[["primary"]][["prereg.max"]] <-
lmer(happiness ~ trial * condition * image +
(1 | ResponseId) +
(1 + trial * condition * image | lab),
data = DF.l.inc)
summary(models[["primary"]][["prereg.max"]])
# -----------------
# Prep environment
# -----------------
# clear environment
rm(list = ls())
# set seed
set.seed(2)
# turn scientific notation off
options(scipen = 999)
# load results
# load("BayesFactorAnalyses.RData")
# allow for Type III SS
options(contrasts = c('contr.sum', 'contr.poly'))
# load packages
library('tidyverse')
library('BayesFactor')
# load data
DF.l.inc <- readRDS("data/processed/DF.l.inc.rds") %>%
mutate(ResponseId = ResponseId %>%
as.numeric() %>%
as.factor())
lmbf15.1 <-  lmBF(happiness ~ image + trial + image : trial +
ResponseId + lab,
whichRandom = c("ResponseId", "lab"),
data = subset(DF.l.inc,
condition == "pentask"))
lmbf15.0 <-  lmBF(happiness ~ image + trial +
ResponseId + lab,
whichRandom = c("ResponseId", "lab"),
data = subset(DF.l.inc,
condition == "pentask"))
(bf15 <- lmbf15.1/lmbf15.0) #  0.196295
1/bf15
(bf15 <- lmbf15.1/lmbf15.0)
1/bf15
(bf15 <- lmbf15.1/lmbf15.0)
1/bf15
