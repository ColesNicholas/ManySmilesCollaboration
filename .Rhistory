"qulty_smlr_var")),
qual.ind = recode(qual.ind,
qulty_rate_var = "compliance",
qulty_feel_var = "genuineness",
qulty_smlr_var = "similarity")
)
# Chunk 6
# m and sd for each quality indicator for each condition
desc1 <- f2.DF %>%
group_by(condition, qual.ind) %>%
summarise(m = round(mean(value,
na.rm = T),
2),
sd = round(sd(value, na.rm = T),
2))
# n for each quality indicator for each condition
desc2 <- f2.DF %>%
filter(!is.na(value)) %>%
group_by(condition, qual.ind) %>%
tally()
# combine
desc <- full_join(desc1, desc2)
rm(desc1, desc2)
# Chunk 7
ggplot(f2.DF,
aes(x = value)) +
# split plot by condition and moderator
facet_grid(cols = vars(condition),
rows = vars(qual.ind),
scales = "free_y") +
# plot histogram (as percentage)
geom_histogram(aes(y = stat(width*density)),
bins = 7,
fill = "gray60") +
# add bin-specific percentage counts to histogram
stat_bin(aes(y = stat(width*density),
label =
paste0((round(stat(width*density),
2) * 100),
"%")),
geom = "text",
bins = 7,
size = 2,
vjust = -.21) +
# paste descriptive statistics to left of histogram
geom_text(data = desc,
aes(label = paste0("n = ", n,
"\n",
"M = ", m,
"\n",
"SD = ", sd)),
x = -1.25,
y = Inf,
size = 2,
hjust = 0,
vjust = 1.25) +
# fix scales
scale_x_continuous(name = "Self-reported rating",
breaks = c(1, 3, 5, 7),
expand = expand_scale(mult = c(.30, .01))) +
scale_y_continuous(expand = expand_scale(mult = c(0, .14)),
name = "Percent",
labels = scales::percent_format())
rm(f2.DF, desc)
models <- readRDS('forNC')
joint_tests(models[["primary"]][["prereg.max"]],
by = "condition",
lmerTest.limit = 9999)
emmeans(models[["primary"]][["prereg.max"]],
pairwise ~ trial | condition,
adjust = "none")
DF.l.full.inc$trial %>% unique()
?if_else
tmp <- DF.l.full.inc %>%
filter(trial != "neutr") %>%
rowwise() %>%
mutate(trial.r = if_else(condition = trial == "happy",
true = "happy",
false = "filler")) %>%
ungroup()
tmp %>% select(ResponseId, trial, trial.r) %>% View()
tmp <- DF.l.full.inc %>%
filter(trial != "neutr") %>%
rowwise() %>%
mutate(trial.r = if_else(condition = trial == "happy",
true = "happy",
false = "filler"),
trial.r = as.factor(trial.r)) %>%
ungroup()
models[["secondary"]][["alt.exp"]] <-
lmer(happiness ~ trial.r * condition * image +
(1 | lab) + (1 | ResponseId) +
(0 + trial.r | lab) +
(0 + condition | lab)  +
(0 + image | lab) +
(0 + trial.r : image | lab) +
(0 + trial.r : condition | lab)  +
(0 + condition : image | lab) +
(0 + trial.r : condition : image | lab),
data = tmp)
summary(models[["secondary"]][["alt.exp"]])
tmp$trial.r %>% levels()
tmp$trial.r %>% contrasts()
anova(models[["secondary"]][["alt.exp"]])
joint_tests(models[["secondary"]][["alt.exp"]],
by = "image",
lmerTest.limit = 9999)
emmeans(models[["secondary"]][["alt.exp"]],
pairwise ~ trial | condition | image,
adjust = "none")
emmeans(models[["secondary"]][["alt.exp"]],
pairwise ~ trial.r | condition | image,
adjust = "none")
?saveRDS
saveRDS(models, file = "forNC")
lmer(happiness ~
trial * condition * image + qulty_rate_var.c + trial*qulty_rate_var.c
(1 | lab) + (1 | ResponseId),
data = DF.l)
lmer(happiness ~
trial * condition * image + qulty_rate_var.c + trial:qulty_rate_var.c +
(1 | lab) + (1 | ResponseId),
data = DF.l)
models[["secondary"]][["quality.rating"]] <-
lmer(happiness ~
trial * condition * image + qulty_rate_var.c + trial:qulty_rate_var.c +
(1 | lab) + (1 | ResponseId) +
(0 + trial | lab) +
(0 + condition | lab)  +
(0 + image | lab) +
(0 + trial : image | lab) +
(0 + trial : condition | lab)  +
(0 + condition : image | lab) +
(0 + trial : condition : image | lab),
data = DF.l)
summary(models[["primary"]][["prereg.max"]])
anova(models[["primary"]][["prereg.max"]])
anova(models[["secondary"]][["quality.rating"]])
summary(models[["secondary"]][["quality.rating"]])
anova(models[["secondary"]][["quality.rating"]])
models[["secondary"]][["simil.rating"]] <-
lmer(happiness ~
trial * condition * image + qulty_rate_var.c + trial:qulty_smlr_var.c +
(1 | lab) + (1 | ResponseId) +
(0 + trial | lab) +
(0 + condition | lab)  +
(0 + image | lab) +
(0 + trial : image | lab) +
(0 + trial : condition | lab)  +
(0 + condition : image | lab) +
(0 + trial : condition : image | lab),
data = DF.l)
saveRDS(models, "forNC")
models[["secondary"]][["simil.rating"]] <-
lmer(happiness ~
trial * condition * image + qulty_smlr_var.c + trial:qulty_smlr_var.c +
(1 | lab) + (1 | ResponseId) +
(0 + trial | lab) +
(0 + condition | lab)  +
(0 + image | lab) +
(0 + trial : image | lab) +
(0 + trial : condition | lab)  +
(0 + condition : image | lab) +
(0 + trial : condition : image | lab),
data = DF.l)
saveRDS(models, "forNC")
models[["secondary"]][["simil.rating"]] <-
lmer(happiness ~
trial * condition * image + qulty_smlr_var.c + trial:qulty_smlr_var.c +
(1 | lab) + (1 | ResponseId) +
(0 + trial | lab) +
(0 + condition | lab)  +
(0 + image | lab) +
(0 + trial : image | lab) +
(0 + trial : condition | lab)  +
(0 + condition : image | lab) +
(0 + trial : condition : image | lab),
data = DF.l)
View(models)
write_rds(models, "forNC")
anova(models[["secondary"]][["simil.rating"]])
models[["secondary"]][["feel.rating"]] <-
lmer(happiness ~
trial * condition * image + qulty_feel_var.c + trial:qulty_feel_var.c +
(1 | lab) + (1 | ResponseId) +
(0 + trial | lab) +
(0 + condition | lab)  +
(0 + image | lab) +
(0 + trial : image | lab) +
(0 + trial : condition | lab)  +
(0 + condition : image | lab) +
(0 + trial : condition : image | lab),
data = DF.l)
models[["secondary"]][["feel.rating"]] <-
lmer(happiness ~
trial * condition * image + qulty_feel_var.c + trial:qulty_feel_var.c +
(1 | lab) + (1 | ResponseId) +
(0 + trial | lab) +
(0 + condition | lab)  +
(0 + image | lab) +
(0 + trial : image | lab) +
(0 + trial : condition | lab)  +
(0 + condition : image | lab) +
(0 + trial : condition : image | lab),
data = DF.l)
write_rds(models, "forNC")
anova(models[["secondary"]][["quality.rating"]])
summary(models[["secondary"]][["quality.rating"]])
confint(models[["secondary"]][["quality.rating"]])
summary(models[["secondary"]][["simil.rating"]])
summary(models[["secondary"]][["feel.rating"]])
models[["secondary"]][["body.aware"]] <-
lmer(happiness ~
trial + condition + image + awareness.c + trial : awareness.c +
(1 | lab) + (1 | ResponseId) +
(0 + trial | lab) +
(0 + condition | lab)  +
(0 + image | lab) +
(0 + trial : awareness.c | lab),
data = DF.l)
models[["secondary"]][["body.aware"]] %>% anova()
models[["primary"]][["prereg.trim"]] <-
lmer(happiness ~ trial * condition * image +
(1 | lab) + (1 | ResponseId),
data = DF.l.inc)
anova(models[["primary"]][["prereg.trim"]])
anova(models[["primary"]][["prereg.max"]])
summary(models[["primary"]][["prereg.max"]])
DF.l.inc$image %>% contrasts()
anova(models[["primary"]][["prereg.trim"]])
anova(models[["primary"]][["prereg.max"]])
anova(models[["primary"]][["prereg.trim"]])
anova(models[["primary"]][["prereg.max"]])
anova(models[["primary"]][["prereg.trim"]])
models[["secondary"]][["compl.diff"]] <-
lmer(qulty_rate_var.c ~ condition * image +
(1 | lab) + (1 | ResponseId) +
(0 + condition | lab)  +
(0 + image | lab),
data = DF.l)
# Chunk 1
# clear environment
rm(list = ls())
# install (if necessary) and load packages
# function written by stevenworthington
Ipak <- function(pkg){
new.pkg <- pkg[!(pkg %in% installed.packages()[, 'Package'])]
if (length(new.pkg))
install.packages(new.pkg, dependencies = TRUE)
sapply(pkg, require, character.only = TRUE)
}
# vector of necessary packages
packages <- c('tidyverse', 'ggplot2', 'lme4',
'lmerTest', 'emmeans', 'metafor',
'ggtext')
# using vector of packages, call ipak function
Ipak(packages)
# delete vestigial
rm(packages, Ipak)
# turn scientific notation off
options(scipen = 999)
# allow for Type III Sums of Square
options(contrasts = c('contr.sum', 'contr.poly'))
# set plotting options
theme_set(theme_classic() +
theme(strip.background = element_rect(fill = "gray35"),
strip.text =element_text(colour = "white"),
panel.border = element_blank(),
legend.position = "none"
)
)
# Chunk 2
DF.w <- readRDS("data/processed/DF.w.rds")
DF.l.full <- readRDS("data/processed/DF.l.full.rds")
DF.l.full.inc <- readRDS("data/processed/DF.l.full.inc.rds")
DF.l <- readRDS("data/processed/DF.l.rds")
DF.l.inc <- readRDS("data/processed/DF.l.inc.rds")
models[["secondary"]][["compl.diff.sub"]] <-
lmer(qulty_rate_var.c ~ condition * image +
(1 | lab) + (1 | ResponseId) +
(0 + condition | lab)  +
(0 + image | lab),
data = DF.l.inc)
models <- list()
models[["secondary"]][["compl.diff.sub"]] <-
lmer(qulty_rate_var.c ~ condition * image +
(1 | lab) +
(0 + condition | lab)  +
(0 + image | lab),
data = DF.l.inc)
anova(models[["secondary"]][["compl.diff.sub"]])
models[["secondary"]][["compl.diff.sub"]] <-
lmer(qulty_rate_var.c ~ condition + image +
(1 | lab) +
(0 + condition | lab)  +
(0 + image | lab),
data = DF.l.inc)
anova(models[["secondary"]][["compl.diff.sub"]])
emmeans(models[["secondary"]][["compl.diff.sub"]],
pairwise ~ condition,
adjust = "none")
models[["secondary"]][["compl.diff.sub"]] <-
lmer(qulty_rate_var ~ condition + image +
(1 | lab) +
(0 + condition | lab)  +
(0 + image | lab),
data = DF.l.inc)
emmeans(models[["secondary"]][["compl.diff.sub"]],
pairwise ~ condition,
adjust = "none")
models[["secondary"]][["compl.diff.sub"]] <-
lmer(qulty_rate_var ~ condition + image +
(1 | lab) +
(0 + condition | lab)  +
(0 + image | lab),
data = DF.l.inc)
anova(models[["secondary"]][["compl.diff.sub"]])
emmeans(models[["secondary"]][["compl.diff.sub"]],
pairwise ~ condition,
adjust = "none")
models[["secondary"]][["compl.diff.sub"]] <-
lmer(qulty_rate_var ~ condition + image +
(1 | lab) +
(0 + condition | lab)  +
(0 + image | lab),
data = DF.l)
anova(models[["secondary"]][["compl.diff.sub"]])
emmeans(models[["secondary"]][["compl.diff.sub"]],
pairwise ~ condition,
adjust = "none")
models[["secondary"]][["compl.diff"]] <-
lmer(qulty_rate_var ~ condition + image +
(1 | lab) +
(0 + condition | lab)  +
(0 + image | lab),
data = DF.l)
anova(models[["secondary"]][["compl.diff"]])
emmeans(models[["secondary"]][["compl.diff"]],
pairwise ~ condition,
adjust = "none")
models[["secondary"]][["simil.diff.sub"]] <-
lmer(qulty_smlr_var ~ condition + image +
(1 | lab) +
(0 + condition | lab)  +
(0 + image | lab),
data = DF.l.inc)
anova(models[["secondary"]][["simil.diff.sub"]])
emmeans(models[["secondary"]][["simil.diff.sub"]],
pairwise ~ condition,
adjust = "none")
models[["secondary"]][["compl.diff.sub"]] <-
lmer(qulty_rate_var ~ condition + image +
(1 | lab) +
(0 + condition | lab)  +
(0 + image | lab),
data = DF.l.inc)
anova(models[["secondary"]][["compl.diff.sub"]])
emmeans(models[["secondary"]][["compl.diff.sub"]],
pairwise ~ condition,
adjust = "none")
f2.DF <- DF.l.inc %>%
# select relevant variables
select(ResponseId, trial, condition,
qulty_rate_var, qulty_feel_var, qulty_smlr_var) %>%
# pivot longer so that there is one row for each moderator
pivot_longer(cols = c(qulty_rate_var,
qulty_smlr_var,
qulty_feel_var),
names_to = "qual.ind") %>%
# delete duplicate set of observations in the neutral trial
filter(trial == "happy") %>%
# relevel factors
mutate(qual.ind = factor(qual.ind,
levels = c("qulty_rate_var",
"qulty_feel_var",
"qulty_smlr_var")),
qual.ind = recode(qual.ind,
qulty_rate_var = "compliance",
qulty_feel_var = "genuineness",
qulty_smlr_var = "similarity")
)
# m and sd for each quality indicator for each condition
desc1 <- f2.DF %>%
group_by(condition, qual.ind) %>%
summarise(m = round(mean(value,
na.rm = T),
2),
sd = round(sd(value, na.rm = T),
2))
# n for each quality indicator for each condition
desc2 <- f2.DF %>%
filter(!is.na(value)) %>%
group_by(condition, qual.ind) %>%
tally()
# combine
desc <- full_join(desc1, desc2)
rm(desc1, desc2)
desc
models[["secondary"]][["compl.diff.sub"]] <-
lmer(qulty_rate_var ~ condition + image +
(1 | lab) +
(0 + condition | lab)  +
(0 + image | lab),
data = DF.l.inc)
anova(models[["secondary"]][["compl.diff.sub"]])
emmeans(models[["secondary"]][["compl.diff.sub"]],
pairwise ~ condition,
adjust = "none")
anova(models[["secondary"]][["compl.diff.sub"]])
anova(models[["secondary"]][["compl.diff.sub"]])
emmeans(models[["secondary"]][["compl.diff.sub"]],
pairwise ~ image,
adjust = "none")
DF.l.inc %>%
group_by(image) %>%
summarise(m = mean(qulty_rate_var),
sd = sd(qulty_rate_var))
anova(models[["secondary"]][["compl.diff.sub"]])
models[["secondary"]][["simil.diff.sub"]] <-
lmer(qulty_smlr_var ~ condition + image +
(1 | lab) +
(0 + condition | lab)  +
(0 + image | lab),
data = DF.l.inc)
models[["secondary"]][["simil.diff.sub.nRS"]] <-
lmer(qulty_smlr_var ~ condition + image +
(1 | lab),
data = DF.l.inc)
anova(models[["secondary"]][["simil.diff.sub.nRS"]])
anova(models[["secondary"]][["simil.diff.sub"]])
anova(models[["secondary"]][["simil.diff.sub.nRS"]])
emmeans(models[["secondary"]][["simil.diff.sub"]],
pairwise ~ condition,
adjust = "none")
emmeans(models[["secondary"]][["simil.diff.sub"]],
pairwise ~ condition,
adjust = "none")
emmeans(models[["secondary"]][["simil.diff.sub.nRS"]],
pairwise ~ condition,
adjust = "none")
desc
emmeans(models[["secondary"]][["simil.diff.sub"]],
pairwise ~ condition,
adjust = "none")
emmeans(models[["secondary"]][["simil.diff.sub.nRS"]],
pairwise ~ condition,
adjust = "none")
models[["secondary"]][["gen.diff.sub"]] <-
lmer(qulty_feel_var ~ condition + image +
(1 | lab) +
(0 + condition | lab)  +
(0 + image | lab),
data = DF.l.inc)
anova(models[["secondary"]][["gen.diff.sub"]])
emmeans(models[["secondary"]][["gen.diff.sub"]],
pairwise ~ condition,
adjust = "none")
models[["secondary"]][["gen.diff.sub.noRS"]] <-
lmer(qulty_feel_var ~ condition + image +
(1 | lab),
data = DF.l.inc)
anova(models[["secondary"]][["gen.diff.sub.noRS"]])
anova(models[["secondary"]][["gen.diff.sub"]])
anova(models[["secondary"]][["gen.diff.sub"]])
emmeans(models[["secondary"]][["gen.diff.sub"]],
pairwise ~ condition,
adjust = "none")
emmeans(models[["secondary"]][["gen.diff.sub.noRS"]],
pairwise ~ condition,
adjust = "none")
desc
emmeans(models[["secondary"]][["gen.diff.sub.noRS"]],
pairwise ~ condition,
adjust = "none")
models <- read_rds("forNC")
View(models)
summary(models[["secondary"]][["quality.rating"]])
# fit model
models[["secondary"]][["quality.rating"]] <-
lmer(happiness ~
trial * condition * image + qulty_rate_var.c + trial:qulty_rate_var.c +
(1 | lab) + (1 | ResponseId) +
(0 + trial | lab) +
(0 + condition | lab)  +
(0 + image | lab) +
(0 + trial : image | lab) +
(0 + trial : condition | lab)  +
(0 + condition : image | lab) +
(0 + trial : condition : image | lab),
data = DF.l.inc)
# inspect results
summary(models[["secondary"]][["quality.rating"]])
confint(models[["secondary"]][["quality.rating"]])
anova(models[["secondary"]][["quality.rating"]])
summary(models[["secondary"]][["quality.rating"]])
confint(models[["secondary"]][["quality.rating"]])
anova(models[["secondary"]][["quality.rating"]])
summary(models[["secondary"]][["quality.rating"]])
models[["secondary"]][["simil.rating"]] <-
lmer(happiness ~
trial * condition * image + qulty_smlr_var.c + trial:qulty_smlr_var.c +
(1 | lab) + (1 | ResponseId) +
(0 + trial | lab) +
(0 + condition | lab)  +
(0 + image | lab) +
(0 + trial : image | lab) +
(0 + trial : condition | lab)  +
(0 + condition : image | lab) +
(0 + trial : condition : image | lab),
data = DF.l.inc)
?write_RDS("forNConTues")
write_rds(models, "forNConTues")
