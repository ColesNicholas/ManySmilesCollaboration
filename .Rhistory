# fit model
models[["secondary"]][["liking"]] <-
lmer(tsk ~ trial * condition +
(1 | lab) +
(1 | ResponseId),
data = DF.l.fil)
anova(models[["secondary"]][["liking"]])
lmer(awareness ~ condition * image +
(1 | lab),
data = DF.w)
models[["secondary"]][["awareness.diff"]] <-
lmer(awareness ~ condition * image +
(1 | lab),
data = DF.w)
anova(models[["secondary"]][["awareness.diff"]])
models[["secondary"]][["awareness.diff"]] <-
lmer(awareness ~ condition + image +
(1 + condition + image | lab),
data = DF.w)
summary(models[["secondary"]][["awareness.diff"]])
models[["secondary"]][["awareness.diff"]] <-
lmer(awareness ~ condition + image +
(1 + condition | lab),
data = DF.w)
summary(models[["secondary"]][["awareness.diff"]])
models[["secondary"]][["awareness.diff"]] <-
lmer(awareness ~ condition + image +
(1 | lab),
data = DF.w)
anova(models[["secondary"]][["awareness.diff"]])
emmeans(models[["secondary"]][["awareness.diff"]],
pairwise ~ condition,
adjust = "none")
# Chunk 1
# clear environment
rm(list = ls())
# install (if necessary) and load packages
# function written by stevenworthington
Ipak <- function(pkg){
new.pkg <- pkg[!(pkg %in% installed.packages()[, 'Package'])]
if (length(new.pkg))
install.packages(new.pkg, dependencies = TRUE)
sapply(pkg, require, character.only = TRUE)
}
# vector of necessary packages
packages <- c('tidyverse', 'ggplot2', 'lme4',
'lmerTest', 'emmeans', 'metafor',
'ggtext')
# using vector of packages, call ipak function
Ipak(packages)
# delete vestigial
rm(packages, Ipak)
# turn scientific notation off
options(scipen = 999)
# allow for Type III Sums of Square
options(contrasts = c('contr.sum', 'contr.poly'))
# set plotting options
theme_set(theme_classic() +
theme(strip.background = element_rect(fill = "gray35"),
strip.text =element_text(colour = "white"),
panel.border = element_blank(),
legend.position = "none"
)
)
# Chunk 2
DF.w <- readRDS("data/DF.w.rds")
DF.l.full <- readRDS("data/DF.l.full.rds")
DF.l <- readRDS("data/DF.l.rds")
DF.l.inc <- readRDS("data/DF.l.inc.rds")
DF.w %>% names()
DF.w %>%
group_by(lab) %>%
summarise(n = n())
DF.w %>%
group_by(country) %>%
summarise(n = n())
DF.w$indiv_gend_var %>% levels()
DF.w$indiv_gend_var %>% unique()
DF.w %>% names()
DF.w %>%
group_by(country) %>%
summarise(n = n(),
inc.att = mean(inc.att),
inc.fol = mean(inc.fol),
inc.mat = mean(inc.mat),
inc.dev = mean(inc.dev),
inc.awa - mean(inc.awa),
inc.dis = mean(inc.dis),
inc = mean(inc))
DF.w %>%
group_by(country) %>%
summarise(n = n(),
inc.att = mean(inc.att),
inc.fol = mean(inc.fol),
inc.mat = mean(inc.mat),
inc.dev = mean(inc.dev),
inc.awa - mean(inc.awa),
inc.dis = mean(inc.dis),
inc = mean(inc))
DF.w %>%
group_by(country) %>%
summarise(n = n(),
inc.att = mean(inc.att),
inc.fol = mean(inc.fol),
inc.mat = mean(inc.mat),
inc.dev = mean(inc.dev),
inc.awa - mean(inc.awa),
inc.dis = mean(inc.dis),
inc = mean(inc)) %>% View()
DF.w %>%
group_by(country) %>%
summarise(n = n(),
inc.att = mean(inc.att),
inc.fol = mean(inc.fol),
inc.mat = mean(inc.mat),
inc.dev = mean(inc.dev),
inc.awa = mean(inc.awa),
inc.dis = mean(inc.dis),
inc = mean(inc)) %>% View()
DF.w %>%
group_by(country) %>%
summarise(n = n(),
inc.att = mean(inc.att,
na.rm = T),
inc.fol = mean(inc.fol,
na.rm = T),
inc.mat = mean(inc.mat,
na.rm = T),
inc.dev = mean(inc.dev,
na.rm = T),
inc.awa = mean(inc.awa,
na.rm = T),
inc.dis = mean(inc.dis,
na.rm = T),
inc = mean(inc,
na.rm = T)) %>% View()
DF.w %>%
group_by(country) %>%
summarise(n = n(),
inc.att = mean(inc.att,
na.rm = T),
inc.fol = mean(inc.fol,
na.rm = T),
inc.mat = mean(inc.mat,
na.rm = T),
inc.dev = mean(inc.dev,
na.rm = T),
inc.awa = mean(inc.awa,
na.rm = T),
inc.dis = mean(inc.dis,
na.rm = T),
inc = mean(inc,
na.rm = T),
n.inc = . %>% filter(inc == 1) %>% n())
DF.w %>%
group_by(country) %>%
summarise(n = n(),
inc.att = mean(inc.att,
na.rm = T),
inc.fol = mean(inc.fol,
na.rm = T),
inc.mat = mean(inc.mat,
na.rm = T),
inc.dev = mean(inc.dev,
na.rm = T),
inc.awa = mean(inc.awa,
na.rm = T),
inc.dis = mean(inc.dis,
na.rm = T),
inc = mean(inc,
na.rm = T),
n.inc = filter(inc == 1) %>% n())
DF.w %>% nrow()
DF.w %>% .[1]
DF.w %>% .[1, ]
DF.w %>% .[1, ] %>% View()
DF.w %>% .[.$inc == 1, ] %>% View()
DF.w %>% .[.$inc == 1, ] %>% nrow()
unique(DF.l$ResponseId) %>% length()
DF.w %>% .[.$inc == 1, ] %>% nrow()
DF.l.inc$ResponseId %>% unique %>% length
DF.w %>% .[.$inc == 1 & .$inc.awa == 1, ] %>% nrow()
DF.l$ResponseId %>% unique %>% length
DF.w %>% filter(inc = 1, inc.awa = 1)
DF.w %>% filter(inc == 1, inc.awa == 1) %>% nrow()
?filter
DF.w %>%
filter(inc == 1,
inc.awa == 1) %>%
nrow()
DF.w[DF.w$inc == 1 & DF.w$inc.awa == 1, ] %>%
nrow()
DF.w[DF.w$inc == 1 & DF.w$inc.awa == 1, ] %>%
# nrow()
select(inc, inc.awa)
DF.w[DF.w$inc == 1 & DF.w$inc.awa == 1, ] %>%
# nrow()
select(inc, inc.awa) %>%
View()
DF.w[!is.na(DF.w$inc) &
DF.w$inc == 1 &
DF.w$inc.awa == 1, ] %>%
nrow()
DF.w[!is.na(DF.w$inc) &
!is.na(DF.w$inc.awa) &
DF.w$inc == 1 &
DF.w$inc.awa == 1, ] %>%
nrow()
DF.w %>%
filter(is.na(inc)) %>%
View()
DF.w %>% names()
DF.w %>%
filter(is.na(inc)) %>%
select(ResponseId, country, awareness : inc)
View()
DF.w %>%
filter(is.na(inc)) %>%
select(ResponseId, country, awareness : inc) %>%
View()
a <-   c(1, 1, NA)
mean(a)
mean(a,
na.rm = T)
DF.w %>%
group_by(country) %>%
summarise(n = n(),
inc.att = mean(inc.att),
inc.fol = mean(inc.fol),
inc.mat = mean(inc.mat),
inc.dev = mean(inc.dev),
inc.awa = mean(inc.awa),
inc.dis = mean(inc.dis),
inc = mean(inc),
n.inc = n())
DF.w %>%
group_by(country) %>%
summarise(n = n(),
inc.att = mean(inc.att),
inc.fol = mean(inc.fol),
inc.mat = mean(inc.mat),
inc.dev = mean(inc.dev),
inc.awa = mean(inc.awa),
inc.dis = mean(inc.dis),
inc = mean(inc),
n.inc = n()) %>% View()
DF.w %>%
group_by(country) %>%
summarise(n = n(),
inc.att = mean(inc.att),
inc.fol = mean(inc.fol),
inc.mat = mean(inc.mat),
inc.dev = mean(inc.dev),
inc.awa = mean(inc.awa), #
inc.dis = mean(inc.dis), #
inc = mean(inc), #
n.inc = n(.[!is.na(.$inc) &
!is.na(.$inc.awa) &
.$inc == 1 &
.$inc.awa == 1, ])
)
DF.w %>%
group_by(country) %>%
summarise(n = n(),
inc.att = mean(inc.att),
inc.fol = mean(inc.fol),
inc.mat = mean(inc.mat),
inc.dev = mean(inc.dev),
inc.awa = mean(inc.awa), #
inc.dis = mean(inc.dis), #
inc = mean(inc), #
n.inc = nrow(.[!is.na(.$inc) &
!is.na(.$inc.awa) &
.$inc == 1 &
.$inc.awa == 1, ]))
DF.w %>%
group_by(country) %>%
summarise(n = n(),
inc.att = mean(inc.att),
inc.fol = mean(inc.fol),
inc.mat = mean(inc.mat),
inc.dev = mean(inc.dev),
inc.awa = mean(inc.awa), #
inc.dis = mean(inc.dis), #
inc = mean(inc))
DF.w %>%
group_by(country) %>%
summarise(n = nrow(),
inc.att = mean(inc.att),
inc.fol = mean(inc.fol),
inc.mat = mean(inc.mat),
inc.dev = mean(inc.dev),
inc.awa = mean(inc.awa), #
inc.dis = mean(inc.dis), #
inc = mean(inc))
DF.w %>%
group_by(country) %>%
summarise(n = nrow(.),
inc.att = mean(inc.att),
inc.fol = mean(inc.fol),
inc.mat = mean(inc.mat),
inc.dev = mean(inc.dev),
inc.awa = mean(inc.awa), #
inc.dis = mean(inc.dis), #
inc = mean(inc))
?n
DF.w %>%
group_by(country) %>%
summarise(n = n(),
inc.att = mean(inc.att),
inc.fol = mean(inc.fol),
inc.mat = mean(inc.mat),
inc.dev = mean(inc.dev),
inc.awa = mean(inc.awa), #
inc.dis = mean(inc.dis), #
inc = mean(inc),
tmp = . %>% select(inc ==1) %>% n())
?mean
DF.w %>%
group_by(country) %>%
summarise(n = n(),
inc.att = mean(inc.att),
inc.fol = mean(inc.fol),
inc.mat = mean(inc.mat),
inc.dev = mean(inc.dev),
inc.awa = count(inc.awa))
DF.w %>%
group_by(country) %>%
summarise(n = n(),
inc.att = mean(inc.att),
inc.fol = mean(inc.fol),
inc.mat = mean(inc.mat),
inc.dev = mean(inc.dev),
inc.awa = sum(inc.awa))
?sum
DF.w %>%
group_by(country) %>%
summarise(n = n(),
inc.att = mean(inc.att),
inc.fol = mean(inc.fol),
inc.mat = mean(inc.mat),
inc.dev = mean(inc.dev),
inc.awa = sum(inc.awa, na.rm = T))
a <- DF.w
a <- DF.w %>% nrow()
b <- DF.w %>%
filter(inc == 1,
inc.awa == 1) %>%
nrow()
b/a
DF.w %>%
group_by(country) %>%
summarise(n = n(),
inc.att = mean(inc.att),
inc.fol = mean(inc.fol),
inc.mat = mean(inc.mat),
inc.dev = mean(inc.dev),
inc.awa = sum(inc.awa, na.rm = T) / n())
DF.w %>%
group_by(country) %>%
summarise(n = n(),
inc.att = mean(inc.att),
inc.fol = mean(inc.fol),
inc.mat = mean(inc.mat),
inc.dev = mean(inc.dev),
inc.awa = sum(inc.awa))
54/120
DF.w %>%
group_by(country) %>%
summarise(n = n(),
inc.att = mean(inc.att),
inc.fol = mean(inc.fol),
inc.mat = mean(inc.mat),
inc.dev = mean(inc.dev),
inc.awa = sum(inc.awa, na.rm = T) / n())
DF.w %>%
group_by(country) %>%
summarise(n = n(),
inc.att = mean(inc.att),
inc.fol = mean(inc.fol),
inc.mat = mean(inc.mat),
inc.dev = mean(inc.dev),
inc.awa = sum(inc.awa, na.rm = T) / n(),
inc.dis = sum(inc.dis, na.rm = T) / n())
desc.2 <- DF.w %>%
filter(inc == 1,
inc.awa == 1) %>%
group_by(country) %>%
summarise(n = n())
desc = ?full_join(desc.1, desc.2, by = 'country')
desc = full_join(desc.1, desc.2, by = 'country')
desc.1 <- DF.w %>%
group_by(country) %>%
summarise(n = n(),
inc.att = mean(inc.att),
inc.fol = mean(inc.fol),
inc.mat = mean(inc.mat),
inc.dev = mean(inc.dev),
inc.awa = sum(inc.awa, na.rm = T) / n(),
inc.dis = sum(inc.dis, na.rm = T) / n())
desc.2 <- DF.w %>%
filter(inc == 1,
inc.awa == 1) %>%
group_by(country) %>%
summarise(n = n())
desc = full_join(desc.1, desc.2, by = 'country')
View(desc)
120 * .25
120 * .45
desc$n.y %>% sum()
DF.l.inc$ResponseId %>% unqiue %>% length
DF.l.inc$ResponseId %>% unique %>% length
# Chunk 1
# clear environment
rm(list = ls())
# install (if necessary) and load packages
# function written by stevenworthington
Ipak <- function(pkg){
new.pkg <- pkg[!(pkg %in% installed.packages()[, 'Package'])]
if (length(new.pkg))
install.packages(new.pkg, dependencies = TRUE)
sapply(pkg, require, character.only = TRUE)
}
# vector of necessary packages
packages <- c('tidyverse', 'ggplot2', 'lme4',
'lmerTest', 'emmeans', 'metafor',
'ggtext')
# using vector of packages, call ipak function
Ipak(packages)
# delete vestigial
rm(packages, Ipak)
# turn scientific notation off
options(scipen = 999)
# allow for Type III Sums of Square
options(contrasts = c('contr.sum', 'contr.poly'))
# set plotting options
theme_set(theme_classic() +
theme(strip.background = element_rect(fill = "gray35"),
strip.text =element_text(colour = "white"),
panel.border = element_blank(),
legend.position = "none"
)
)
# Chunk 2
DF.w <- readRDS("data/DF.w.rds")
DF.l.full <- readRDS("data/DF.l.full.rds")
DF.l <- readRDS("data/DF.l.rds")
DF.l.inc <- readRDS("data/DF.l.inc.rds")
# Chunk 3
desc.1 <- DF.w %>%
group_by(country) %>%
summarise(n = n(),
inc.att = mean(inc.att),
inc.fol = mean(inc.fol),
inc.mat = mean(inc.mat),
inc.dev = mean(inc.dev),
inc.awa = sum(inc.awa, na.rm = T) / n(),
inc.dis = sum(inc.dis, na.rm = T) / n())
desc.2 <- DF.w %>%
filter(inc == 1,
inc.awa == 1) %>%
group_by(country) %>%
summarise(n = n())
desc = full_join(desc.1, desc.2, by = 'country')
rm(desc.1, desc.2)
View(desc)
desc %>%
mutate_at(vars(contains("inc")),
funs(. %>%
* 100))
desc %>%
mutate_at(vars(contains("inc")),
funs(. * 100))
?mutate_at
desc %>%
mutate_at(vars(contains("inc")),
.funs(. * 100))
desc %>%
mutate_at(vars(contains("inc")),
funs(*100))
desc %>%
mutate_at(vars(contains("inc")),
funs(. * 100))
desc %>%
mutate_at(vars(contains("inc")),
round((. * 100),
2)
)
desc %>%
mutate_at(vars(contains("inc")),
funs(round((. * 100),
2))
)
desc %>%
mutate_at(vars(contains("inc")),
funs(round((. * 100),
0))
)
desc %>%
mutate_at(vars(contains("inc")),
funs(paste0(round((. * 100),
0),
"%")
)
)
desc %>%
mutate_at(vars(contains("inc")),
funs(paste0(round((. * 100),
0),
"%")
)
) %>% write.csv("tmp.csv")
